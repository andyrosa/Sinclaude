
<!DOCTYPE html>
<html lang="en">
<!-- this page has become 95.4% vibe coded, unlike the simulator, where 95.4% of the code was human (tm) reviewed -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sinclaude Sinclair Simple Simulator</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="index.css">
    <script src="constants_and_css_vars.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"
        integrity="sha384-948ahk4ZmxYVYOc+rxN1H2gM1EJ2Duhp7uHtZ4WSLkV4Vtx5MUqnV+l7u9B+jFv+"
        crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">
        <a href="simulator.html" class="launch-button">LAUNCH SIMULATOR</a>

        <div id="content" class="content">
            Loading README.md
        </div>
    </div>

    <div class="media-content">
        <h2>Screenshots</h2>
        <img src="desktop_screenshot.PNG" alt="Sinclaude Desktop View">
        <div class="image-label">Desktop View - Full Interface (1366px native width)</div>
        <img src="phone_screenshot_top.PNG" alt="Sinclaude Mobile Top">
        <div class="image-label">Mobile View - Top of Screen</div>
        <img src="phone_screenshot_bottom.PNG" alt="Sinclaude Mobile Bottom">
        <div class="image-label">Mobile View - Bottom of Screen</div>
    </div>

    <script>
        // Fetch and render README.md
        // const README_GHPAGES_URL= 'https://andyrosa.github.io/Sinclaude/README.md';
        const README_REPO_URL = 'https://raw.githubusercontent.com/andyrosa/Sinclaude/main/README.md';
        //not to be confused with  https://github.com/andyrosa/Sinclaude/blob/main/README.md" which is HTML not raw markdown
        async function loadReadme() {
            try {
                let response;
                const filename = README_REPO_URL.split('/').pop(); // Extract filename from URL
                
                // Try local folder first, then repo URL as fallback
                let fetchFailed = false;
                try {
                    response = await fetch(filename);
                    if (!response.ok) {
                        fetchFailed = true;
                    }
                } catch (error) {
                    fetchFailed = true;
                }
                
                if (fetchFailed) {
                    response = await fetch(README_REPO_URL);
                }
                
                const markdown = await response.text();
                const html = marked.parse(markdown);
                document.getElementById('content').innerHTML = html;
                
                // Insert magazine ad after Features section
                const featuresHeading = document.querySelector('#content h2');
                if (featuresHeading && featuresHeading.textContent.includes('Features')) {
                    const adContainer = document.createElement('div');
                    adContainer.className = 'magazine-ad-container';
                    adContainer.innerHTML = `
                        <img src="magazine_ad.png" alt="Sinclair ZX81 Magazine Advertisement" class="magazine-ad-top">
                        <div class="attributions">
                            <p>Image credit: <a href="https://archive.org/details/byte-magazine-1981-12/page/n169/mode/2up"
                                target="_blank" rel="noopener">Byte Magazine December 1981</a></p>
                        </div>
                    `;
                    
                    // Find the next h2 element (Technical Details) to insert before it
                    let nextSection = featuresHeading.nextElementSibling;
                    while (nextSection && nextSection.tagName !== 'H2') {
                        nextSection = nextSection.nextElementSibling;
                    }
                    
                    if (nextSection) {
                        nextSection.parentNode.insertBefore(adContainer, nextSection);
                    } else {
                        // If no next h2 found, append after features content
                        document.getElementById('content').appendChild(adContainer);
                    }
                }
                
                // Move "About This Project" section to after screenshots
                const aboutHeading = Array.from(document.querySelectorAll('#content h2')).find(h => 
                    h.textContent.includes('About This Project'));
                
                if (aboutHeading) {
                    // Collect all elements that belong to the "About This Project" section
                    const aboutElements = [];
                    let currentElement = aboutHeading;
                    
                    while (currentElement) {
                        const nextElement = currentElement.nextElementSibling;
                        // Stop if we hit another h2 (next section)
                        if (nextElement && nextElement.tagName === 'H2') {
                            aboutElements.push(currentElement);
                            break;
                        }
                        aboutElements.push(currentElement);
                        currentElement = nextElement;
                    }
                    
                    // Remove the about section from its current position
                    const aboutContainer = document.createElement('div');
                    aboutContainer.id = 'about-section-moved';
                    aboutElements.forEach(el => {
                        aboutContainer.appendChild(el.cloneNode(true));
                        el.remove();
                    });
                    
                    // Store it to append after screenshots load
                    window.aboutSectionToMove = aboutContainer;
                }
            } catch (error) {
                // Show fallback message with repo URL
                document.getElementById('content').innerHTML = marked.parse(
                    "## README.md not available\n" +
                    "You can view it [here](" + README_REPO_URL + ")."
                );
            } finally {
                // Show the media content after README loading is complete (success or error)
                document.querySelectorAll('.media-content').forEach(element => {
                    element.classList.add('loaded');
                });
                
                // Append the "About This Project" section after screenshots if it was moved
                if (window.aboutSectionToMove) {
                    const mediaContent = document.querySelector('.media-content');
                    if (mediaContent) {
                        mediaContent.appendChild(window.aboutSectionToMove);
                    }
                }
            }
        }
        window.addEventListener('load', loadReadme);
    </script>
</body>

</html>